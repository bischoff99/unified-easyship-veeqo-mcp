{
  "statistics": {
    "detectionDate": "2025-09-15T13:06:09.209Z",
    "formats": {
      "typescript": {
        "sources": {
          "src/server/tools/shipping.ts": {
            "lines": 732,
            "tokens": 6816,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 39,
            "duplicatedTokens": 481,
            "percentage": 5.33,
            "percentageTokens": 7.06,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/server/tools/index.ts": {
            "lines": 7,
            "tokens": 29,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/core/tools/weight-to-oz.ts": {
            "lines": 22,
            "tokens": 221,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/core/tools/verify-address.ts": {
            "lines": 34,
            "tokens": 248,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/core/tools/parcel-presets.ts": {
            "lines": 16,
            "tokens": 172,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/core/tools/index.ts": {
            "lines": 21,
            "tokens": 116,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/core/tools/health.ts": {
            "lines": 165,
            "tokens": 1274,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/api/schemas/parcel.ts": {
            "lines": 9,
            "tokens": 109,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/api/schemas/index.ts": {
            "lines": 123,
            "tokens": 1183,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 22,
            "duplicatedTokens": 281,
            "percentage": 17.89,
            "percentageTokens": 23.75,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/api/schemas/address.ts": {
            "lines": 15,
            "tokens": 192,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 13,
            "duplicatedTokens": 162,
            "percentage": 86.67,
            "percentageTokens": 84.38,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/utils/type-safe-logger.ts": {
            "lines": 91,
            "tokens": 761,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/utils/monitoring.ts": {
            "lines": 452,
            "tokens": 3810,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/utils/logger.ts": {
            "lines": 36,
            "tokens": 430,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/utils/errors.ts": {
            "lines": 441,
            "tokens": 3315,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/utils/env.ts": {
            "lines": 52,
            "tokens": 514,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/utils/auth-utils.ts": {
            "lines": 88,
            "tokens": 658,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/types/client-interfaces.ts": {
            "lines": 258,
            "tokens": 1900,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/services/index.ts": {
            "lines": 87,
            "tokens": 592,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/middleware/auth.ts": {
            "lines": 371,
            "tokens": 2750,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/core/types.ts": {
            "lines": 71,
            "tokens": 530,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/core/index.ts": {
            "lines": 38,
            "tokens": 220,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/core/client.ts": {
            "lines": 204,
            "tokens": 2022,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/config/index.ts": {
            "lines": 191,
            "tokens": 1977,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 14,
            "duplicatedTokens": 162,
            "percentage": 7.33,
            "percentageTokens": 8.19,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/api/client.ts": {
            "lines": 7,
            "tokens": 26,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/server.ts": {
            "lines": 141,
            "tokens": 861,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 3672,
          "tokens": 30726,
          "sources": 25,
          "clones": 6,
          "duplicatedLines": 44,
          "duplicatedTokens": 543,
          "percentage": 1.2,
          "percentageTokens": 1.77,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      }
    },
    "total": {
      "lines": 3672,
      "tokens": 30726,
      "sources": 25,
      "clones": 6,
      "duplicatedLines": 44,
      "duplicatedTokens": 543,
      "percentage": 1.2,
      "percentageTokens": 1.77,
      "newDuplicatedLines": 0,
      "newClones": 0
    }
  },
  "duplicates": [
    {
      "format": "typescript",
      "lines": 9,
      "fragment": "${args.tracking_code} in ${duration}ms`);\n        const result = {\n          ...trackingInfo,\n          processing_time_ms: duration,\n        };\n        return JSON.stringify(result, null, 2);\n      } catch (error: any) {\n        const duration = Date.now() - startTime;\n        monitoring.recordApiCall('easypost', '/trackers/package'",
      "tokens": 0,
      "firstFile": {
        "name": "src/server/tools/shipping.ts",
        "start": 681,
        "end": 689,
        "startLoc": {
          "line": 681,
          "column": 38,
          "position": 6332
        },
        "endLoc": {
          "line": 689,
          "column": 20,
          "position": 6427
        }
      },
      "secondFile": {
        "name": "src/server/tools/shipping.ts",
        "start": 160,
        "end": 168,
        "startLoc": {
          "line": 160,
          "column": 30,
          "position": 1537
        },
        "endLoc": {
          "line": 168,
          "column": 12,
          "position": 1632
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ",\n          processing_time_ms: duration,\n        };\n        return JSON.stringify(result, null, 2);\n      } catch (error: any) {\n        const duration = Date.now() - startTime;\n        monitoring.recordApiCall('easypost', '/addresses/verify', duration, 500, true);\n        logError('Failed to verify address'",
      "tokens": 0,
      "firstFile": {
        "name": "src/server/tools/shipping.ts",
        "start": 721,
        "end": 728,
        "startLoc": {
          "line": 721,
          "column": 16,
          "position": 6694
        },
        "endLoc": {
          "line": 728,
          "column": 27,
          "position": 6780
        }
      },
      "secondFile": {
        "name": "src/server/tools/shipping.ts",
        "start": 200,
        "end": 207,
        "startLoc": {
          "line": 200,
          "column": 17,
          "position": 1899
        },
        "endLoc": {
          "line": 207,
          "column": 29,
          "position": 1985
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": "(),\n  company: z.string().optional(),\n  street1: z.string(),\n  street2: z.string().optional(),\n  city: z.string(),\n  state: z.string(),\n  zip: z.string(),\n  country: z.string().default('US'),\n  phone: z.string().optional(),\n  email: z.string().email",
      "tokens": 0,
      "firstFile": {
        "name": "src/api/schemas/index.ts",
        "start": 10,
        "end": 19,
        "startLoc": {
          "line": 10,
          "column": 9,
          "position": 44
        },
        "endLoc": {
          "line": 19,
          "column": 6,
          "position": 163
        }
      },
      "secondFile": {
        "name": "src/server/tools/shipping.ts",
        "start": 18,
        "end": 27,
        "startLoc": {
          "line": 18,
          "column": 7,
          "position": 156
        },
        "endLoc": {
          "line": 27,
          "column": 9,
          "position": 275
        }
      }
    },
    {
      "format": "typescript",
      "lines": 7,
      "fragment": "export const AddressSchema = z.object({\n  name: z.string().optional(),\n  company: z.string().optional(),\n  street1: z.string(),\n  street2: z.string().optional(),\n  city: z.string(),\n  state: z.string().",
      "tokens": 0,
      "firstFile": {
        "name": "src/api/schemas/address.ts",
        "start": 3,
        "end": 9,
        "startLoc": {
          "line": 3,
          "column": 1,
          "position": 14
        },
        "endLoc": {
          "line": 9,
          "column": 2,
          "position": 104
        }
      },
      "secondFile": {
        "name": "src/api/schemas/index.ts",
        "start": 9,
        "end": 23,
        "startLoc": {
          "line": 9,
          "column": 1,
          "position": 19
        },
        "endLoc": {
          "line": 23,
          "column": 2,
          "position": 221
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": "(),\n  zip: z.string(),\n  country: z.string().default('US'),\n  phone: z.string().optional(),\n  email: z.string().email().optional(),\n});\n\nexport type",
      "tokens": 0,
      "firstFile": {
        "name": "src/api/schemas/address.ts",
        "start": 9,
        "end": 16,
        "startLoc": {
          "line": 9,
          "column": 9,
          "position": 106
        },
        "endLoc": {
          "line": 16,
          "column": 5,
          "position": 178
        }
      },
      "secondFile": {
        "name": "src/api/schemas/index.ts",
        "start": 15,
        "end": 22,
        "startLoc": {
          "line": 15,
          "column": 7,
          "position": 107
        },
        "endLoc": {
          "line": 22,
          "column": 6,
          "position": 179
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": "= z.object({\n  apiKey: z.string().refine((val) => {\n    // Allow empty/mock keys in test environment or when explicitly in mock mode\n    if (process.env.NODE_ENV === 'test' || val === 'mock') {\n      return true;\n    }\n    return val.length > 0;\n  }, 'VEEQO_API_KEY is required'",
      "tokens": 0,
      "firstFile": {
        "name": "src/config/index.ts",
        "start": 36,
        "end": 43,
        "startLoc": {
          "line": 36,
          "column": 2,
          "position": 328
        },
        "endLoc": {
          "line": 43,
          "column": 28,
          "position": 409
        }
      },
      "secondFile": {
        "name": "src/config/index.ts",
        "start": 23,
        "end": 30,
        "startLoc": {
          "line": 23,
          "column": 2,
          "position": 182
        },
        "endLoc": {
          "line": 30,
          "column": 31,
          "position": 263
        }
      }
    }
  ]
}